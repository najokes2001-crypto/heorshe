<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–û–Ω –∏–ª–∏ –û–Ω–∞ - –ò–≥—Ä–∞ –Ω–∞ —Å–≤–∞–¥—å–±—É</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body {
            background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
            min-height: 100vh;
            font-family: 'Arial', sans-serif;
            padding: 20px;
            font-size: 18px;
            overflow-x: hidden;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            flex-direction: column;
            gap: 30px;
        }
        
        .main {
            background: white;
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            text-align: center;
            width: 100%;
            position: relative;
            overflow: hidden;
        }
        
        h1 {
            color: #e91e63;
            margin-bottom: 20px;
            font-size: 42px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }
        
        h2 {
            color: #555;
            margin: 20px 0;
            font-size: 28px;
        }
        
        h3 {
            font-size: 22px;
            color: #777;
            margin: 15px 0;
        }
        
        .form-container {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 15px;
            margin: 25px 0;
            text-align: left;
            border-left: 5px solid #e91e63;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #333;
            font-size: 20px;
        }
        
        input, select, textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 10px;
            font-size: 18px;
            transition: all 0.3s;
        }
        
        textarea {
            min-height: 120px;
            resize: vertical;
        }
        
        input:focus, select:focus, textarea:focus {
            border-color: #e91e63;
            outline: none;
            box-shadow: 0 0 10px rgba(233,30,99,0.3);
        }
        
        .checkbox-group {
            display: flex;
            align-items: center;
            margin-top: 10px;
        }
        
        .checkbox-group input {
            width: auto;
            margin-right: 10px;
        }
        
        .my_button {
            background: linear-gradient(45deg, #e91e63, #ff4081);
            color: white;
            border: none;
            padding: 15px 30px;
            margin: 20px 0;
            border-radius: 20px;
            font-size: 22px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: bold;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
            display: inline-block;
        }
        
        .my_button:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 15px rgba(233,30,99,0.4);
        }
        
        .my_button:disabled {
            opacity: 0.7;
            cursor: not-allowed;
            transform: none;
        }
        
        .secondary_button {
            background: linear-gradient(45deg, #2196f3, #21cbf3);
            color: white;
            border: none;
            padding: 10px 20px;
            margin: 10px 5px;
            border-radius: 15px;
            font-size: 18px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: bold;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
            display: inline-block;
        }
        
        .secondary_button:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 12px rgba(33,150,243,0.4);
        }
        
        .question-container {
            display: none;
            margin-top: 30px;
            animation: fadeIn 0.5s ease;
            background: #fff9c4;
            padding: 20px;
            border-radius: 15px;
            border: 3px solid #ffeb3b;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .question-text {
            font-size: 24px;
            font-style: italic;
            color: #333;
            margin-bottom: 20px;
            text-align: center;
            padding: 15px;
            background: white;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        
        .answer-section {
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
            gap: 20px;
            margin-top: 20px;
            display: none;
        }
        
        .answer-form {
            background: #e3f2fd;
            padding: 20px;
            border-radius: 15px;
            width: 100%;
            max-width: 400px;
            text-align: center;
        }
        
        .answer-options {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 20px 0;
        }
        
        .answer-option {
            padding: 15px 25px;
            border: 2px solid #2196f3;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: bold;
        }
        
        .answer-option:hover {
            background: #bbdefb;
        }
        
        .answer-option.selected {
            background: #2196f3;
            color: white;
        }
        
        .results-container {
            display: none;
            margin-top: 30px;
            background: #e8f5e9;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
        }
        
        .result-item {
            margin: 15px 0;
            font-size: 20px;
        }
        
        .highlight {
            font-weight: bold;
            color: #e91e63;
        }
        
        .guest-info {
            font-style: italic;
            color: #777;
            margin-top: 10px;
        }
        
        .anonymous {
            color: #999;
        }
        
        .spinner {
            width: 70px;
            height: 70px;
            border: 7px solid #f3f3f3;
            border-top: 7px solid #e91e63;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 30px auto;
            display: none;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
           100% { transform: rotate(360deg); }
        }
        
        .confetti {
            position: absolute;
            width: 15px;
            height: 15px;
            background: #f00;
            opacity: 0.8;
            border-radius: 0;
            animation: confettiFall 5s linear forwards;
            z-index: 100;
        }
        
        @keyframes confettiFall {
            0% { transform: translateY(-100px) rotate(0deg); opacity: 1; }
           100% { transform: translateY(1000px) rotate(720deg); opacity: 0; }
        }
        
        .error-message {
            color: #f44336;
            font-size: 18px;
            margin-top: 10px;
            display: none;
        }
        
        .instructions {
            background: #ffecb3;
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
            text-align: left;
        }
        
        .instructions ul {
            margin-left: 20px;
        }
        
        .queue-info {
            background: #e1f5fe;
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            text-align: center;
            font-size: 20px;
        }
        
        .queue-number {
            font-weight: bold;
            color: #e91e63;
            font-size: 24px;
        }
        
        .no-questions {
            text-align: center;
            padding: 20px;
            color: #777;
            font-style: italic;
        }
        
        .status-message {
            margin: 15px 0;
            padding: 10px;
            border-radius: 10px;
            font-size: 18px;
        }
        
        .status-waiting {
            background: #fff3cd;
            color: #856404;
            border: 1px solid #ffeaa7;
        }
        
        .status-ready {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .sync-indicator {
            position: fixed;
            top: 10px;
            right: 10px;
            background: #4caf50;
            color: white;
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 14px;
            display: none;
        }
        
        @media (max-width: 768px) {
            h1 {
                font-size: 32px;
            }
            
            h2 {
                font-size: 24px;
            }
            
            .my_button {
                font-size: 20px;
                padding: 12px 25px;
            }
            
            .answer-section {
                flex-direction: column;
                align-items: center;
            }
        }
        
        @media (max-width: 480px) {
            .main {
                padding: 20px;
            }
            
            h1 {
                font-size: 28px;
            }
            
            .form-container {
                padding: 15px;
            }
            
            label, input, select, textarea {
                font-size: 16px;
            }
            
            .answer-options {
                flex-direction: column;
                gap: 10px;
            }
        }
    </style>
</head>
<body>
    <div class="sync-indicator" id="sync-indicator">–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è...</div>
    
    <div class="container">
        <div class='main' id="main-screen">
            <h1>üéé –û–Ω –∏–ª–∏ –û–Ω–∞? üéé</h1>
            <h2>–í–µ—Å–µ–ª–∞—è –∏–≥—Ä–∞ –¥–ª—è –≤–∞—à–µ–π —Å–≤–∞–¥—å–±—ã</h2>
            
            <div class="instructions">
                <h3>–ö–∞–∫ –∏–≥—Ä–∞—Ç—å:</h3>
                <ul>
                    <li>–ì–æ—Å—Ç–∏ –ø—Ä–∏–¥—É–º—ã–≤–∞—é—Ç –≤–æ–ø—Ä–æ—Å—ã, –Ω–∞ –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ –æ—Ç–≤–µ—Ç–∏—Ç—å "–û–ù" –∏–ª–∏ "–û–ù–ê"</li>
                    <li>–í—Å–µ –≤–æ–ø—Ä–æ—Å—ã –Ω–∞–∫–∞–ø–ª–∏–≤–∞—é—Ç—Å—è –≤ –æ–±—â–µ–º —Å–ø–∏—Å–∫–µ</li>
                    <li>–ö–æ–≥–¥–∞ –≤—Å–µ –≤–æ–ø—Ä–æ—Å—ã –∑–∞–¥–∞–Ω—ã, –∂–µ–Ω–∏—Ö –∏ –Ω–µ–≤–µ—Å—Ç–∞ –Ω–∞—á–∏–Ω–∞—é—Ç –æ—Ç–≤–µ—á–∞—Ç—å</li>
                    <li>–ü—Ä–∏–º–µ—Ä –≤–æ–ø—Ä–æ—Å–∞: "–ö—Ç–æ —á–∞—â–µ –º–æ–µ—Ç –ø–æ—Å—É–¥—É?"</li>
                </ul>
            </div>
            
            <div class="form-container">
                <div class="form-group">
                    <label for="guest-select">–ö—Ç–æ –∑–∞–¥–∞–µ—Ç –≤–æ–ø—Ä–æ—Å?</label>
                    <select id="guest-select">
                        <option value="">-- –í—ã–±–µ—Ä–∏—Ç–µ –≥–æ—Å—Ç—è --</option>
                        <!-- –ì–æ—Å—Ç–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ JavaScript -->
                    </select>
                </div>
                
                <div class="checkbox-group">
                    <input type="checkbox" id="anonymous">
                    <label for="anonymous">–•–æ—á—É –æ—Å—Ç–∞—Ç—å—Å—è –∞–Ω–æ–Ω–∏–º–Ω—ã–º</label>
                </div>
                
                <div class="form-group">
                    <label for="question-text">–í–∞—à –≤–æ–ø—Ä–æ—Å (–¥–æ–ª–∂–µ–Ω –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞—Ç—å –æ—Ç–≤–µ—Ç "–û–ù" –∏–ª–∏ "–û–ù–ê"):</label>
                    <textarea id="question-text" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ö—Ç–æ —á–∞—â–µ –º–æ–µ—Ç –ø–æ—Å—É–¥—É?"></textarea>
                </div>
            </div>
            
            <button class="my_button" id="submit-question">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –≤–æ–ø—Ä–æ—Å</button>
            
            <div class="spinner" id="spinner"></div>
            <div class="error-message" id="error-message"></div>
            
            <div class="queue-info">
                –í–æ–ø—Ä–æ—Å–æ–≤ —Å–æ–±—Ä–∞–Ω–æ: <span class="queue-number" id="questions-count">0</span>
            </div>
            
            <div class="status-message status-waiting" id="status-message">
                –û–∂–∏–¥–∞–µ–º –≤–æ–ø—Ä–æ—Å—ã –æ—Ç –≥–æ—Å—Ç–µ–π...
            </div>
            
            <button class="secondary_button" id="start-answers" disabled>–ù–∞—á–∞—Ç—å –æ—Ç–≤–µ—á–∞—Ç—å –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã</button>
            <button class="secondary_button" id="refresh-questions">–û–±–Ω–æ–≤–∏—Ç—å —Å–ø–∏—Å–æ–∫ –≤–æ–ø—Ä–æ—Å–æ–≤</button>
        </div>
        
        <div class="main question-container" id="question-container">
            <h2>–í–æ–ø—Ä–æ—Å –¥–ª—è –∂–µ–Ω–∏—Ö–∞ –∏ –Ω–µ–≤–µ—Å—Ç—ã:</h2>
            <div class="question-text" id="current-question">
                –ó–¥–µ—Å—å –±—É–¥–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –≤–æ–ø—Ä–æ—Å –æ—Ç –≥–æ—Å—Ç—è
            </div>
            <div class="guest-info" id="question-author">
                –í–æ–ø—Ä–æ—Å –æ—Ç: –ì–æ—Å—Ç—å
            </div>
            
            <div class="answer-section" id="answer-section">
                <div class="answer-form">
                    <h3>–û—Ç–≤–µ—Ç –∂–µ–Ω–∏—Ö–∞</h3>
                    <div class="answer-options">
                        <div class="answer-option" data-answer="he">–û–ù</div>
                        <div class="answer-option" data-answer="she">–û–ù–ê</div>
                    </div>
                    <button class="secondary_button" id="submit-groom">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –æ—Ç–≤–µ—Ç</button>
                </div>
                
                <div class="answer-form">
                    <h3>–û—Ç–≤–µ—Ç –Ω–µ–≤–µ—Å—Ç—ã</h3>
                    <div class="answer-options">
                        <div class="answer-option" data-answer="he">–û–ù</div>
                        <div class="answer-option" data-answer="she">–û–ù–ê</div>
                    </div>
                    <button class="secondary_button" id="submit-bride">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –æ—Ç–≤–µ—Ç</button>
                </div>
            </div>
        </div>
        
        <div class="main results-container" id="results-container">
            <h2>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã:</h2>
            <div class="question-text" id="result-question">
                –í–æ–ø—Ä–æ—Å –±—É–¥–µ—Ç –∑–¥–µ—Å—å
            </div>
            <div class="guest-info" id="result-author">
                –í–æ–ø—Ä–æ—Å –æ—Ç: –ì–æ—Å—Ç—å
            </div>
            
            <div class="result-item">
                –û—Ç–≤–µ—Ç –∂–µ–Ω–∏—Ö–∞: <span class="highlight" id="groom-answer">–û–ù</span>
            </div>
            
            <div class="result-item">
                –û—Ç–≤–µ—Ç –Ω–µ–≤–µ—Å—Ç—ã: <span class="highlight" id="bride-answer">–û–ù–ê</span>
            </div>
            
            <div class="result-item">
                –†–µ–∑—É–ª—å—Ç–∞—Ç: <span class="highlight" id="result-text">–°–æ–≤–ø–∞–¥–µ–Ω–∏–µ!</span>
            </div>
            
            <button class="my_button" id="next-question">–°–ª–µ–¥—É—é—â–∏–π –≤–æ–ø—Ä–æ—Å</button>
            <button class="secondary_button" id="finish-answers">–ó–∞–≤–µ—Ä—à–∏—Ç—å –æ—Ç–≤–µ—Ç—ã</button>
        </div>
    </div>
    
    <script>
        // –î–∞–Ω–Ω—ã–µ –æ –≥–æ—Å—Ç—è—Ö
        var guestNames = [
            "–ê–Ω–∞—Å—Ç–∞—Å–∏—è", "–î–º–∏—Ç—Ä–∏–π", "–ù–∞—Ç–∞–ª—å—è", "–ì—Ä–∏–≥–æ—Ä–∏–π", "–í–∏–∫—Ç–æ—Ä",
            "–ê–ª–µ–∫—Å–µ–π", "–û–ª—å–≥–∞", "–ù–∞—Ç–∞–ª—å—è", "–û–ª—å–≥–∞", "–†–æ–º–∞–Ω",
            "–õ–∏–ª–∏—è", "–î–∞–Ω–∏–∏–ª", "–ò–ª—å—è", "–ù–∞—Ç–∞–ª—å—è", "–î–∞–Ω–∏–∏–ª",
            "–ê–Ω—Ç–æ–Ω–∏–Ω–∞", "–î–º–∏—Ç—Ä–∏–π", "–ê–ª–µ–Ω–∞", "–ò–ª—å—è", "–î–º–∏—Ç—Ä–∏–π",
            "–ú–∞—Ä–∏—è", "–ê–Ω–∞—Å—Ç–∞—Å–∏—è", "–í–ª–∞–¥", "–õ—é–±–æ–≤—å", "–õ—é–±–æ–≤—å",
            "–†–æ–º–∞–Ω", "–°–≤–µ—Ç–ª–∞–Ω–∞", "–ê–Ω–∞—Å—Ç–∞—Å–∏—è", "–ê–Ω–∞—Å—Ç–∞—Å–∏—è", "–ê–Ω–Ω–∞",
            "–Ø—Ä–æ—Å–ª–∞–≤", "–ò–≤–∞–Ω", "–ò–ª—å—è", "–õ—é–±–æ–≤—å", "–ú–∞—Ä–∏–Ω–∞", "–≠–¥–≥–∞—Ä"
        ];

        var guestStatuses = [
            "–ù–µ–≤–µ—Å—Ç–∞ üë∞", "–ñ–µ–Ω–∏—Ö ü§µ", "–ú–∞–º–∞ –Ω–µ–≤–µ—Å—Ç—ã üë©", "–ü–∞–ø–∞ –Ω–µ–≤–µ—Å—Ç—ã üë®", "–ë—Ä–∞—Ç –Ω–µ–≤–µ—Å—Ç—ã üë¶",
            "–ü–∞–ø–∞ –∂–µ–Ω–∏—Ö–∞ üë®", "–ú–∞—á–µ—Ö–∞ –∂–µ–Ω–∏—Ö–∞ üë©", "–ë–∞–±—É—à–∫–∞ –∂–µ–Ω–∏—Ö–∞ üëµ", "–ë–∞–±—É—à–∫–∞ –Ω–µ–≤–µ—Å—Ç—ã üëµ", "–ë—Ä–∞—Ç –∂–µ–Ω–∏—Ö–∞ üë¶",
            "–°–µ—Å—Ç—Ä–∞ –∂–µ–Ω–∏—Ö–∞ üëß", "–ë—Ä–∞—Ç –Ω–µ–≤–µ—Å—Ç—ã üë¶", "–î—è–¥—è –Ω–µ–≤–µ—Å—Ç—ã üë®", "–ö—Ä–µ—Å—Ç–Ω–∞—è/—Ç–µ—Ç—è –Ω–µ–≤–µ—Å—Ç—ã üë©", "–î—Ä—É–≥ –∂–µ–Ω–∏—Ö–∞ üéÆ",
            "–í—Ç–æ—Ä–∞—è –ø–æ–ª–æ–≤–∏–Ω–∫–∞ –¥—Ä—É–≥–∞ –∂–µ–Ω–∏—Ö–∞ üíë", "–î—Ä—É–≥ –∂–µ–Ω–∏—Ö–∞ üéÆ", "–ü–æ–¥—Ä—É–≥–∞ –∂–µ–Ω–∏—Ö–∞ üíÉ", "–î—Ä—É–≥ –∂–µ–Ω–∏—Ö–∞ üéÆ", "–î—Ä—É–≥ –∂–µ–Ω–∏—Ö–∞ üéÆ",
            "–ü–æ–¥—Ä—É–≥–∞ –∂–µ–Ω–∏—Ö–∞ üíÉ", "–ü–æ–¥—Ä—É–≥–∞ –Ω–µ–≤–µ—Å—Ç—ã üíÉ", "–î—Ä—É–≥ –∂–µ–Ω–∏—Ö–∞ üéÆ", "–ü–æ–¥—Ä—É–≥–∞ –Ω–µ–≤–µ—Å—Ç—ã üíÉ", "–ü–æ–¥—Ä—É–≥–∞ –Ω–µ–≤–µ—Å—Ç—ã üíÉ",
            "–î—Ä—É–≥ –Ω–µ–≤–µ—Å—Ç—ã üéÆ", "–ü–æ–¥—Ä—É–≥–∞ –Ω–µ–≤–µ—Å—Ç—ã üíÉ", "–ü–æ–¥—Ä—É–≥–∞ –Ω–µ–≤–µ—Å—Ç—ã üíÉ", "–ü–æ–¥—Ä—É–≥–∞ –Ω–µ–≤–µ—Å—Ç—ã üíÉ", "–ü–æ–¥—Ä—É–≥–∞ –Ω–µ–≤–µ—Å—Ç—ã üíÉ",
            "–î—Ä—É–≥ –Ω–µ–≤–µ—Å—Ç—ã üéÆ", "–î—Ä—É–≥ –∂–µ–Ω–∏—Ö–∞ üéÆ", "–î—Ä—É–≥ –Ω–µ–≤–µ—Å—Ç—ã üéÆ", "–°–≤–æ–¥–Ω–∞—è —Å–µ—Å—Ç—Ä–∞ üëß", "–¢–µ—Ç—è –Ω–µ–≤–µ—Å—Ç—ã üë©", "–ë—Ä–∞—Ç –Ω–µ–≤–µ—Å—Ç—ã üë¶"
        ];
        
        // –ú–∞—Å—Å–∏–≤ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –≤–æ–ø—Ä–æ—Å–æ–≤
        var questions = [];
        var currentQuestionIndex = -1;
        
        // –¢–µ–∫—É—â–∏–π –≤–æ–ø—Ä–æ—Å –∏ –æ—Ç–≤–µ—Ç—ã
        var currentQuestion = null;
        var groomAnswer = null;
        var brideAnswer = null;
        
        // –ö–ª—é—á –¥–ª—è JSONBin.io (–±–µ—Å–ø–ª–∞—Ç–Ω—ã–π —Å–µ—Ä–≤–µ—Ä –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è JSON)
        const JSONBIN_BIN_ID = '66d4a8a9ad19ca34b887d5c9';
        const JSONBIN_API_KEY = '$2a$10$QMQm/sHovVIs1sCwpu.1.eG.7t.7F.7t.7F.7t.7F.7t.7F.7t.7F';
        
        // –ó–∞–ø–æ–ª–Ω—è–µ–º –≤—ã–ø–∞–¥–∞—é—â–∏–π —Å–ø–∏—Å–æ–∫ –≥–æ—Å—Ç–µ–π
        $(document).ready(function() {
            var guestSelect = $("#guest-select");
            
            for (var i = 0; i < guestNames.length; i++) {
                // –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –∂–µ–Ω–∏—Ö–∞ –∏ –Ω–µ–≤–µ—Å—Ç—É, —Ç–∞–∫ –∫–∞–∫ –æ–Ω–∏ –æ—Ç–≤–µ—á–∞—é—Ç, –∞ –Ω–µ –∑–∞–¥–∞—é—Ç –≤–æ–ø—Ä–æ—Å—ã
                if (guestStatuses[i] === "–ñ–µ–Ω–∏—Ö ü§µ" || guestStatuses[i] === "–ù–µ–≤–µ—Å—Ç–∞ üë∞") {
                    continue;
                }
                
                guestSelect.append('<option value="' + i + '">' + guestNames[i] + ' - ' + guestStatuses[i] + '</option>');
            }
            
            // –ó–∞–≥—Ä—É–∂–∞–µ–º –≤–æ–ø—Ä–æ—Å—ã –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
            loadQuestions();
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤–æ–ø—Ä–æ—Å–æ–≤ –∫–∞–∂–¥—ã–µ 5 —Å–µ–∫—É–Ω–¥
            setInterval(loadQuestions, 5000);
        });
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –≤–æ–ø—Ä–æ—Å–æ–≤ —Å —Å–µ—Ä–≤–µ—Ä–∞
        async function loadQuestions() {
            $("#sync-indicator").show();
            
            try {
                const response = await fetch(`https://api.jsonbin.io/v3/b/${JSONBIN_BIN_ID}/latest`, {
                    headers: {
                        'X-Master-Key': JSONBIN_API_KEY
                    }
                });
                
                if (response.ok) {
                    const data = await response.json();
                    questions = data.record.questions || [];
                    updateQuestionsCount();
                } else {
                    console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –≤–æ–ø—Ä–æ—Å–æ–≤:', response.status);
                    // –ò—Å–ø–æ–ª—å–∑—É–µ–º –ª–æ–∫–∞–ª—å–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã –∫–∞–∫ –∑–∞–ø–∞—Å–Ω–æ–π –≤–∞—Ä–∏–∞–Ω—Ç
                    const localQuestions = localStorage.getItem('weddingQuestions');
                    if (localQuestions) {
                        questions = JSON.parse(localQuestions);
                        updateQuestionsCount();
                    }
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –≤–æ–ø—Ä–æ—Å–æ–≤:', error);
                // –ò—Å–ø–æ–ª—å–∑—É–µ–º –ª–æ–∫–∞–ª—å–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã –∫–∞–∫ –∑–∞–ø–∞—Å–Ω–æ–π –≤–∞—Ä–∏–∞–Ω—Ç
                const localQuestions = localStorage.getItem('weddingQuestions');
                if (localQuestions) {
                    questions = JSON.parse(localQuestions);
                    updateQuestionsCount();
                }
            } finally {
                $("#sync-indicator").hide();
            }
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≤–æ–ø—Ä–æ—Å–æ–≤ –Ω–∞ —Å–µ—Ä–≤–µ—Ä
        async function saveQuestionsToServer() {
            $("#sync-indicator").show();
            
            try {
                const response = await fetch(`https://api.jsonbin.io/v3/b/${JSONBIN_BIN_ID}`, {
                    method: 'PUT',
                    headers: {
                        'Content-Type': 'application/json',
                        'X-Master-Key': JSONBIN_API_KEY
                    },
                    body: JSON.stringify({ questions: questions })
                });
                
                if (!response.ok) {
                    console.error('–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≤–æ–ø—Ä–æ—Å–æ–≤:', response.status);
                    // –°–æ—Ö—Ä–∞–Ω—è–µ–º –ª–æ–∫–∞–ª—å–Ω–æ –∫–∞–∫ –∑–∞–ø–∞—Å–Ω–æ–π –≤–∞—Ä–∏–∞–Ω—Ç
                    localStorage.setItem('weddingQuestions', JSON.stringify(questions));
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –≤–æ–ø—Ä–æ—Å–æ–≤:', error);
                // –°–æ—Ö—Ä–∞–Ω—è–µ–º –ª–æ–∫–∞–ª—å–Ω–æ –∫–∞–∫ –∑–∞–ø–∞—Å–Ω–æ–π –≤–∞—Ä–∏–∞–Ω—Ç
                localStorage.setItem('weddingQuestions', JSON.stringify(questions));
            } finally {
                $("#sync-indicator").hide();
            }
        }
        
        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–∫–∏ "–û–±–Ω–æ–≤–∏—Ç—å —Å–ø–∏—Å–æ–∫ –≤–æ–ø—Ä–æ—Å–æ–≤"
        $("#refresh-questions").click(function() {
            loadQuestions();
        });
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –≤–æ–ø—Ä–æ—Å–∞
        $("#submit-question").click(async function() {
            var guestId = $("#guest-select").val();
            var anonymous = $("#anonymous").is(":checked");
            var questionText = $("#question-text").val().trim();
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö
            if (!guestId && !anonymous) {
                showError("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ –≥–æ—Å—Ç—è –∏–ª–∏ –æ—Ç–º–µ—Ç—å—Ç–µ –∞–Ω–æ–Ω–∏–º–Ω–æ—Å—Ç—å");
                return;
            }
            
            if (!questionText) {
                showError("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –≤–æ–ø—Ä–æ—Å");
                return;
            }
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –≤–æ–ø—Ä–æ—Å –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç –æ—Ç–≤–µ—Ç "–æ–Ω" –∏–ª–∏ "–æ–Ω–∞"
            if (!questionText.toLowerCase().includes("–∫—Ç–æ")) {
                showError("–í–æ–ø—Ä–æ—Å –¥–æ–ª–∂–µ–Ω –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞—Ç—å –æ—Ç–≤–µ—Ç '–û–ù' –∏–ª–∏ '–û–ù–ê', –Ω–∞–ø—Ä–∏–º–µ—Ä: '–ö—Ç–æ —á–∞—â–µ –º–æ–µ—Ç –ø–æ—Å—É–¥—É?'");
                return;
            }
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–ø–∏–Ω–Ω–µ—Ä
            $("#spinner").show();
            
            try {
                // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤–æ–ø—Ä–æ—Å
                await saveQuestion(guestId, anonymous, questionText);
                
                // –û—á–∏—â–∞–µ–º —Ñ–æ—Ä–º—É
                $("#guest-select").val("");
                $("#anonymous").prop("checked", false);
                $("#question-text").val("");
                
                alert("–í–∞—à –≤–æ–ø—Ä–æ—Å –¥–æ–±–∞–≤–ª–µ–Ω –≤ –æ–±—â–∏–π —Å–ø–∏—Å–æ–∫! –ö–æ–≥–¥–∞ –≤—Å–µ –≥–æ—Å—Ç–∏ –æ—Ç–ø—Ä–∞–≤—è—Ç –≤–æ–ø—Ä–æ—Å—ã, –∂–µ–Ω–∏—Ö –∏ –Ω–µ–≤–µ—Å—Ç–∞ –Ω–∞—á–Ω—É—Ç –Ω–∞ –Ω–∏—Ö –æ—Ç–≤–µ—á–∞—Ç—å.");
            } catch (error) {
                showError("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –≤–æ–ø—Ä–æ—Å–∞. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.");
            } finally {
                // –°–∫—Ä—ã–≤–∞–µ–º —Å–ø–∏–Ω–Ω–µ—Ä
                $("#spinner").hide();
            }
        });
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≤–æ–ø—Ä–æ—Å–∞
        async function saveQuestion(guestId, anonymous, questionText) {
            var newQuestion = {
                id: Date.now(), // —É–Ω–∏–∫–∞–ª—å–Ω—ã–π ID –Ω–∞ –æ—Å–Ω–æ–≤–µ –≤—Ä–µ–º–µ–Ω–∏
                guestId: guestId,
                anonymous: anonymous,
                question: questionText,
                timestamp: new Date(),
                answered: false
            };
            
            // –î–æ–±–∞–≤–ª—è–µ–º –≤–æ–ø—Ä–æ—Å –≤ –º–∞—Å—Å–∏–≤
            questions.push(newQuestion);
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –Ω–∞ —Å–µ—Ä–≤–µ—Ä
            await saveQuestionsToServer();
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –≤–æ–ø—Ä–æ—Å–æ–≤
            updateQuestionsCount();
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—á–µ—Ç—á–∏–∫–∞ –≤–æ–ø—Ä–æ—Å–æ–≤
        function updateQuestionsCount() {
            var questionsCount = $("#questions-count");
            var statusMessage = $("#status-message");
            
            questionsCount.text(questions.length);
            
            if (questions.length === 0) {
                statusMessage.removeClass("status-ready").addClass("status-waiting")
                    .text("–û–∂–∏–¥–∞–µ–º –≤–æ–ø—Ä–æ—Å—ã –æ—Ç –≥–æ—Å—Ç–µ–π...");
                $("#start-answers").prop("disabled", true);
            } else {
                statusMessage.removeClass("status-waiting").addClass("status-ready")
                    .text("–í–æ–ø—Ä–æ—Å—ã –ø–æ–ª—É—á–µ–Ω—ã! –ú–æ–∂–Ω–æ –Ω–∞—á–∏–Ω–∞—Ç—å –æ—Ç–≤–µ—á–∞—Ç—å.");
                $("#start-answers").prop("disabled", false);
            }
        }
        
        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–∫–∏ "–ù–∞—á–∞—Ç—å –æ—Ç–≤–µ—á–∞—Ç—å –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã"
        $("#start-answers").click(function() {
            if (questions.length === 0) {
                alert("–ù–µ—Ç –≤–æ–ø—Ä–æ—Å–æ–≤ –¥–ª—è –æ—Ç–≤–µ—Ç–∞!");
                return;
            }
            
            // –ù–∞—á–∏–Ω–∞–µ–º —Å –ø–µ—Ä–≤–æ–≥–æ –≤–æ–ø—Ä–æ—Å–∞
            currentQuestionIndex = 0;
            showQuestion(questions[currentQuestionIndex]);
            
            // –°–∫—Ä—ã–≤–∞–µ–º –æ—Å–Ω–æ–≤–Ω—É—é –ø–∞–Ω–µ–ª—å –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–∞–Ω–µ–ª—å –æ—Ç–≤–µ—Ç–æ–≤
            $("#main-screen").hide();
            $("#question-container").show();
            $("#answer-section").show();
        });
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ç–µ–∫—É—â–µ–≥–æ –≤–æ–ø—Ä–æ—Å–∞ –¥–ª—è –∂–µ–Ω–∏—Ö–∞ –∏ –Ω–µ–≤–µ—Å—Ç—ã
        function showQuestion(question) {
            currentQuestion = question;
            
            // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –æ—Ç–≤–µ—Ç—ã
            groomAnswer = null;
            brideAnswer = null;
            
            // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ç–µ–∫—Å—Ç –≤–æ–ø—Ä–æ—Å–∞
            $("#current-question").text(question.question);
            $("#result-question").text(question.question);
            
            // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∞–≤—Ç–æ—Ä–∞ –≤–æ–ø—Ä–æ—Å–∞
            var authorText = "–ê–Ω–æ–Ω–∏–º–Ω—ã–π –≥–æ—Å—Ç—å";
            if (!question.anonymous && question.guestId !== null) {
                authorText = guestNames[question.guestId] + " - " + guestStatuses[question.guestId];
            }
            
            $("#question-author").text("–í–æ–ø—Ä–æ—Å –æ—Ç: " + authorText);
            $("#result-author").text("–í–æ–ø—Ä–æ—Å –æ—Ç: " + authorText);
            
            // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –≤—ã–±–æ—Ä –æ—Ç–≤–µ—Ç–æ–≤
            $(".answer-option").removeClass("selected");
            
            // –í–∫–ª—é—á–∞–µ–º –∫–Ω–æ–ø–∫–∏ –æ—Ç–≤–µ—Ç–æ–≤
            $("#submit-groom, #submit-bride").prop("disabled", false);
        }
        
        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –≤—ã–±–æ—Ä–∞ –æ—Ç–≤–µ—Ç–æ–≤
        $(".answer-option").click(function() {
            // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –ø—Ä–µ–¥—ã–¥—É—â–∏–π –≤—ã–±–æ—Ä –≤ —ç—Ç–æ–π –≥—Ä—É–ø–ø–µ
            $(this).siblings().removeClass("selected");
            // –í—ã–¥–µ–ª—è–µ–º –≤—ã–±—Ä–∞–Ω–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç
            $(this).addClass("selected");
        });
        
        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –æ—Ç–≤–µ—Ç–æ–≤
        $("#submit-groom").click(function() {
            var selected = $(this).siblings(".answer-options").find(".selected");
            if (selected.length === 0) {
                alert("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ –æ—Ç–≤–µ—Ç");
                return;
            }
            
            groomAnswer = selected.data("answer");
            $(this).prop("disabled", true);
            checkAnswers();
        });
        
        $("#submit-bride").click(function() {
            var selected = $(this).siblings(".answer-options").find(".selected");
            if (selected.length === 0) {
                alert("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ –æ—Ç–≤–µ—Ç");
                return;
            }
            
            brideAnswer = selected.data("answer");
            $(this).prop("disabled", true);
            checkAnswers();
        });
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏, –æ—Ç–≤–µ—Ç–∏–ª–∏ –ª–∏ –æ–±–∞
        function checkAnswers() {
            if (groomAnswer && brideAnswer) {
                // –û–±–∞ –æ—Ç–≤–µ—Ç–∏–ª–∏, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
                showResults();
            }
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–∫–∞–∑–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
        function showResults() {
            // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –æ—Ç–≤–µ—Ç—ã
            $("#groom-answer").text(groomAnswer === "he" ? "–û–ù" : "–û–ù–ê");
            $("#bride-answer").text(brideAnswer === "he" ? "–û–ù" : "–û–ù–ê");
            
            // –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
            var resultText = groomAnswer === brideAnswer ? "–°–æ–≤–ø–∞–¥–µ–Ω–∏–µ!" : "–†–∞–∑–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã!";
            $("#result-text").text(resultText);
            
            // –ü–æ–º–µ—á–∞–µ–º –≤–æ–ø—Ä–æ—Å –∫–∞–∫ –æ—Ç–≤–µ—á–µ–Ω–Ω—ã–π
            questions[currentQuestionIndex].answered = true;
            saveQuestionsToServer();
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏
            $("#question-container").hide();
            $("#results-container").show();
            
            // –°–æ–∑–¥–∞–µ–º –∫–æ–Ω—Ñ–µ—Ç—Ç–∏ –¥–ª—è –ø—Ä–∞–∑–¥–Ω–∏—á–Ω–æ–≥–æ —ç—Ñ—Ñ–µ–∫—Ç–∞
            createConfetti();
        }
        
        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –∫–Ω–æ–ø–∫–∏ "–°–ª–µ–¥—É—é—â–∏–π –≤–æ–ø—Ä–æ—Å"
        $("#next-question").click(function() {
            // –ü–µ—Ä–µ—Ö–æ–¥–∏–º –∫ —Å–ª–µ–¥—É—é—â–µ–º—É –≤–æ–ø—Ä–æ—Å—É
            currentQuestionIndex++;
            
            if (currentQuestionIndex < questions.length) {
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–ª–µ–¥—É—é—â–∏–π –≤–æ–ø—Ä–æ—Å
                showQuestion(questions[currentQuestionIndex]);
                $("#results-container").hide();
                $("#question-container").show();
            } else {
                // –í–æ–ø—Ä–æ—Å—ã –∑–∞–∫–æ–Ω—á–∏–ª–∏—Å—å
                $("#results-container").hide();
                $("#main-screen").show();
                alert("–í–æ–ø—Ä–æ—Å—ã –∑–∞–∫–æ–Ω—á–∏–ª–∏—Å—å! –°–ø–∞—Å–∏–±–æ –∑–∞ —É—á–∞—Å—Ç–∏–µ –≤ –∏–≥—Ä–µ!");
                
                // –û—á–∏—â–∞–µ–º –≤–æ–ø—Ä–æ—Å—ã –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è
                questions = [];
                saveQuestionsToServer();
                updateQuestionsCount();
            }
        });
        
        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –∫–Ω–æ–ø–∫–∏ "–ó–∞–≤–µ—Ä—à–∏—Ç—å –æ—Ç–≤–µ—Ç—ã"
        $("#finish-answers").click(function() {
            // –í–æ–∑–≤—Ä–∞—â–∞–µ–º—Å—è –∫ –æ—Å–Ω–æ–≤–Ω–æ–º—É —ç–∫—Ä–∞–Ω—É
            $("#results-container").hide();
            $("#main-screen").show();
            currentQuestionIndex = -1;
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —Å—á–µ—Ç—á–∏–∫ –≤–æ–ø—Ä–æ—Å–æ–≤
            updateQuestionsCount();
        });
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–æ–Ω—Ñ–µ—Ç—Ç–∏
        function createConfetti() {
            const colors = ['#ff0000', '#00ff00', '#0000ff', '#ffff00', '#ff00ff', '#00ffff'];
            const container = $('.container');
            
            for (let i = 0; i < 30; i++) {
                const confetti = $('<div class="confetti"></div>');
                confetti.css({
                    left: Math.random() * 100 + '%',
                    background: colors[Math.floor(Math.random() * colors.length)],
                    transform: 'rotate(' + (Math.random() * 360) + 'deg)'
                });
                
                container.append(confetti);
                
                setTimeout(() => {
                    confetti.remove();
                }, 5000);
            }
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –æ—à–∏–±–∫–∏
        function showError(message) {
            $("#error-message").text(message).show();
            setTimeout(function() {
                $("#error-message").hide();
            }, 5000);
        }
    </script>
</body>
</html>
